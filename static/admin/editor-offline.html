<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Decap CMS - Photomaria (–û—Ñ—Ñ–ª–∞–π–Ω)</title>
    
    <!-- –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã Decap CMS -->
    <link href="decap/decap-cms.css" rel="stylesheet">
    <script src="decap/decap-cms.js"></script>
    
    <style>
        body { 
            margin: 0; 
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .status {
            background: #27ae60;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéõÔ∏è Decap CMS - Photomaria</h1>
        <div class="status">üü¢ –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</div>
    </div>

    <div id="cms-editor">
        <div class="loading">
            <p>üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞...</p>
            <p>–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã</p>
        </div>
    </div>

    <script>
        // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ Decap CMS
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
            if (typeof DecapCMS === 'undefined') {
                showError('–õ–æ–∫–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ DecapCMS –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Å–∫–∞—á–∞–Ω—ã –≤ static/admin/decap/');
                return;
            }
            
            // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É
            setTimeout(initializeOfflineCMS, 1000);
        });

        function initializeOfflineCMS() {
            try {
                console.log('üéØ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ—Ñ—Ñ–ª–∞–π–Ω Decap CMS...');
                
                // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞ (–æ—Ñ—Ñ–ª–∞–π–Ω)
                const config = {
                    backend: {
                        name: "test-repo"
                    },
                    locale: 'ru',
                    media_folder: "static/images/uploads",
                    public_folder: "/images/uploads",
                    collections: [
                        {
                            name: "gallery",
                            label: "üì∑ –ì–∞–ª–µ—Ä–µ–∏",
                            folder: "content/gallery",
                            create: true,
                            slug: "{{slug}}",
                            fields: [
                                {
                                    label: "–ù–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞", 
                                    name: "title", 
                                    widget: "string",
                                    required: true
                                },
                                {
                                    label: "–û–ø–∏—Å–∞–Ω–∏–µ", 
                                    name: "description", 
                                    widget: "text",
                                    required: false
                                },
                                {
                                    label: "–î–∞—Ç–∞ —Å—ä–µ–º–∫–∏", 
                                    name: "date", 
                                    widget: "datetime",
                                    required: true
                                },
                                {
                                    label: "–ö–∞—Ç–µ–≥–æ—Ä–∏—è", 
                                    name: "category", 
                                    widget: "select", 
                                    options: [
                                        { label: "üíí –°–≤–∞–¥—å–±—ã", value: "—Å–≤–∞–¥—å–±—ã" },
                                        { label: "üì∏ –ü–æ—Ä—Ç—Ä–µ—Ç—ã", value: "–ø–æ—Ä—Ç—Ä–µ—Ç—ã" },
                                        { label: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º–µ–π–Ω—ã–µ", value: "—Å–µ–º–µ–π–Ω—ã–µ" },
                                        { label: "üéâ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è", value: "–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è" }
                                    ],
                                    required: true
                                },
                                {
                                    label: "–û–±–ª–æ–∂–∫–∞ –∞–ª—å–±–æ–º–∞", 
                                    name: "cover_image", 
                                    widget: "image",
                                    required: false,
                                    hint: "–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ –¥–ª—è –ø—Ä–µ–≤—å—é –∞–ª—å–±–æ–º–∞"
                                },
                                {
                                    label: "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏", 
                                    name: "images", 
                                    widget: "list",
                                    allow_add: true,
                                    allow_delete: true,
                                    field: {
                                        label: "–§–æ—Ç–æ", 
                                        name: "image", 
                                        widget: "image",
                                        allow_multiple: false
                                    },
                                    hint: "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞"
                                },
                                {
                                    label: "–¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏", 
                                    name: "body", 
                                    widget: "markdown",
                                    required: false,
                                    hint: "–û–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ç–æ—Å–µ—Å—Å–∏–∏, –æ—Ç–∑—ã–≤ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Ç.–¥."
                                }
                            ]
                        },
                        {
                            name: "pages",
                            label: "üìÑ –°—Ç—Ä–∞–Ω–∏—Ü—ã", 
                            files: [
                                {
                                    name: "home",
                                    label: "üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞",
                                    file: "content/_index.md",
                                    fields: [
                                        {
                                            label: "–ó–∞–≥–æ–ª–æ–≤–æ–∫", 
                                            name: "title", 
                                            widget: "string",
                                            required: true
                                        },
                                        {
                                            label: "–û–ø–∏—Å–∞–Ω–∏–µ", 
                                            name: "description", 
                                            widget: "text",
                                            required: true
                                        },
                                        {
                                            label: "Hero —Ñ–æ—Ç–æ", 
                                            name: "hero_image", 
                                            widget: "image",
                                            required: false
                                        },
                                        {
                                            label: "–¢–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã", 
                                            name: "body", 
                                            widget: "markdown",
                                            required: true
                                        }
                                    ]
                                },
                                {
                                    name: "services",
                                    label: "üí∞ –£—Å–ª—É–≥–∏ –∏ —Ü–µ–Ω—ã",
                                    file: "content/services.md",
                                    fields: [
                                        {
                                            label: "–ó–∞–≥–æ–ª–æ–≤–æ–∫", 
                                            name: "title", 
                                            widget: "string",
                                            required: true
                                        },
                                        {
                                            label: "–¢–µ–∫—Å—Ç", 
                                            name: "body", 
                                            widget: "markdown",
                                            required: true
                                        }
                                    ]
                                },
                                {
                                    name: "contact",
                                    label: "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã",
                                    file: "content/contact.md",
                                    fields: [
                                        {
                                            label: "–ó–∞–≥–æ–ª–æ–≤–æ–∫", 
                                            name: "title", 
                                            widget: "string",
                                            required: true
                                        },
                                        {
                                            label: "–¢–µ–ª–µ—Ñ–æ–Ω", 
                                            name: "phone", 
                                            widget: "string",
                                            required: true
                                        },
                                        {
                                            label: "Email", 
                                            name: "email", 
                                            widget: "string",
                                            required: false
                                        },
                                        {
                                            label: "–ê–¥—Ä–µ—Å", 
                                            name: "address", 
                                            widget: "text",
                                            required: false
                                        },
                                        {
                                            label: "–¢–µ–∫—Å—Ç", 
                                            name: "body", 
                                            widget: "markdown",
                                            required: true
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                };

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Decap CMS
                console.log('üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ñ—Ñ–ª–∞–π–Ω Decap CMS...');
                DecapCMS.init({ config });
                
                console.log('‚úÖ –û—Ñ—Ñ–ª–∞–π–Ω Decap CMS —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showError('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }

        function showError(message) {
            document.getElementById('cms-editor').innerHTML = `
                <div style="background: #e74c3c; color: white; padding: 20px; margin: 20px; border-radius: 8px; text-align: center;">
                    <h3>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</h3>
                    <p>${message}</p>
                    <div style="margin-top: 15px;">
                        <button onclick="downloadDecapFiles()" style="background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">
                            üì• –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª—ã Decap CMS
                        </button>
                        <button onclick="window.close()" style="background: #95a5a6; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px;">
                            ‚ùå –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                </div>
            `;
        }

        function downloadDecapFiles() {
            alert('–ß—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª—ã Decap CMS:\n\n1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª download-decap.bat –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞\n2. –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:\n   - https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js\n   - https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.css\n3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –ø–∞–ø–∫—É static/admin/decap/');
        }
    </script>
</body>
</html>